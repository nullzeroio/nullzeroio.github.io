<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Locked Out of vCenter 5.1 &middot; NullZero
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-08 sidebar-overlay">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>A virtual bitbucket of ramblings about technology.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About</a>
        
      
    
      
    

    <a class="sidebar-nav-item" href="/archive/v1.0.0.zip">Download</a>
    <a class="sidebar-nav-item" href="">GitHub project</a>
    <span class="sidebar-nav-item">Currently v1.0.0</span>
  </nav>

  <div class="sidebar-item">
    <p>
      &copy; 2017. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">NullZero</a>
            <small>A virtual bitbucket of ramblings about technology.</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Locked Out of vCenter 5.1</h1>
  <span class="post-date">20 Sep 2013</span>
  <p>Recently, I was called in to help a client out with a vCenter 5.1 install and came across the somewhat common issue of being locked out of vCenter (which is most common after the upgrade process). After some investigation, it appeared the proper Identity Sources were configured and SSO, in general, looked okay. After scratching our heads a bit, I decided to take a look inside the vCenter DB and verify account/group access. Since this was a clean installation, and not an upgrade, the only account in the vCenter DB was the one specified during the installation wizard. This was a SQL DB, so the table where this access can be found is in the “VMW.VPX_ACCESS” table, within the vCenter DB.</p>

<p>Note: If you are going to attempt this procedure, make sure you have a good/valid backup of the entire DB that you can restore.</p>

<p>To verify/modify access:</p>

<ol>
  <li>
    <p>Stop all vCenter Services</p>
  </li>
  <li>
    <p>Use SQL Management Studio to connect to the DB</p>
  </li>
  <li>
    <p>Expand the vCenter DB (in my case, the name is ‘VCDB’)</p>
  </li>
  <li>
    <p>Expand the Tables and right click on the “VMW.VPX_ACCESS” table; select “Edit Top 200 Rows”.</p>
  </li>
  <li>
    <p>You should see a single row (if this is a new install) with the group/account details that you setup as part of the install wizard, in the “PRINCIPAL” column.</p>
  </li>
</ol>

<p><a href="http://www.vmotioned.com/wp-content/uploads/2013/09/VPX_ACCESS_1.jpg"><img src="http://www.vmotioned.com/wp-content/uploads/2013/09/VPX_ACCESS_1.jpg" alt="VPX_ACCESS_1" width="543" height="69" class="aligncenter size-full wp-image-429" srcset="http://www.vmotioned.com/wp-content/uploads/2013/09/VPX_ACCESS_1.jpg 543w, http://www.vmotioned.com/wp-content/uploads/2013/09/VPX_ACCESS_1-300x38.jpg 300w" sizes="(max-width: 543px) 100vw, 543px" /></a></p>

<ol>
  <li>
    <p>Make any necessary changes to the account details and close the table</p>
  </li>
  <li>
    <p>Restart vCenter services and see if access has been restored</p>
  </li>
</ol>

<p>In this particular scenario, it was found that the client entered the incorrect details during the install wizard, which is why no one was able to access vCenter.</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/powershell/2015/02/06/worklog-powershell-module/">
            WorkLog PowerShell Module
            <small>06 Feb 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
